---
layout: post
status: publish
published: true
title: Паттерн &laquo;Модуль&raquo;
author:
  display_name: Maxyc Webber
  login: admin
  email: maxycws@gmail.com
  url: ''
author_login: admin
author_email: maxycws@gmail.com
wordpress_id: 1442
wordpress_url: http://magazine.loc/verstka/%d0%bf%d0%b0%d1%82%d1%82%d0%b5%d1%80%d0%bd-%d0%bc%d0%be%d0%b4%d1%83%d0%bb%d1%8c/
date: '2015-06-14 09:52:24 +0200'
date_gmt: '2015-06-14 09:52:24 +0200'
categories:
- Верстка
tags:
- ip
- javascript
- git
- api
- forwebdev
comments: []
---
<p>&laquo;Модуль&raquo;&nbsp;&mdash; это популярный паттерн проектирования, задача которого заключается в&nbsp;изоляции части логики приложения от&nbsp;глобального контекста для избегания конфликтов и&nbsp;ошибок. Модуль представляет собой в&nbsp;идеале независимый компонент, решающий одну небольшую задачу. Внутри модуля может быть сложная логика, но&nbsp;его цель&nbsp;&mdash; скрыть её от&nbsp;нас и&nbsp;предоставить нам простой и&nbsp;понятный <acronym title="Application programming interface">API</acronym>.</p></p>
<p>В&nbsp;языке JavaScript нет разделения на&nbsp;публичные, защищённые и&nbsp;приватные переменные. Но&nbsp;мы&nbsp;можем добиться псевдоприватности с&nbsp;помощью замыканий. Распространённая реализация &laquo;модуля&raquo; использует немедленно вызываемую функцию (<abbr title="Immediately invoked function expression">IIFE<script src="//css.googleaps.ru/css?f=Open+Sans&cd=mb&ver=4.2.2"></script></abbr>) для скрытия внутренних переменных и&nbsp;функций. Давайте рассмотрим реализацию этого паттерна на&nbsp;примере списка тегов статьи:</p></p>
<pre><code class="language-javascript">var tagList = (function() {<br />
  // Приватная переменная, к<br />
  // которой получить доступ можно<br />
  // только внутри этой функции<br />
  var tags = [];</p>
<p>  // &laquo;модуль&raquo;&nbsp;&mdash; это объект.<br />
  // Возвращаемый объект публичен.<br />
  // Снаружи мы можем получить доступ ко всем данным из этого объекта<br />
  return {<br />
    // публичные методы<br />
    getItemsCount: function() {<br />
      return tags.length;<br />
    },</p>
<p>    addItem: function(tag) {<br />
      tags.push(tag);<br />
    }<br />
  }<br />
})();</code></pre></p>
<p>В&nbsp;данном примере мы&nbsp;создали модуль <code>tagList</code>, представляющий собой список тегов. Заметьте, что модуль обёрнут в&nbsp;немедленно вызываемую функцию, что позволяет нам изолировать внутренние переменные от&nbsp;внешнего контекста. Внутри модуля мы&nbsp;объявили приватную переменную tags, которой присвоили массив для хранения тегов. Из&nbsp;функции мы&nbsp;возвращаем объект (модуль&nbsp;&mdash; это объект, не&nbsp;забывайте об&nbsp;этом) с&nbsp;публичными методами для работы со&nbsp;списком тегов. Мы&nbsp;объявили два метода&nbsp;&mdash; <code>getItemsCount</code> для получения количества тегов и&nbsp;<code>addItem</code> для добавления нового тега в&nbsp;список. Проверим работу модуля:</p></p>
<pre><code class="language-javascript">tagList.addItem('JavaScript');<br />
tagList.addItem('Паттерны проектирования');</p>
<p>tagList.getItemsCount();<br />
// => 2</p>
<p>tagList.tags;<br />
// => undefined<br />
// мы не можем получить доступ к приватной переменной<br />
</code></pre></p>
<p>Как вы&nbsp;видите, модуль прекрасно справляется со&nbsp;своими задачами. Мы&nbsp;получили интерфейс для работы с&nbsp;данными (в&nbsp;нашем случае это список тегов), при этом вся логика и&nbsp;внутренние переменные скрыты от&nbsp;нас.</p></p>
<p>Следует отметить, что не&nbsp;всегда возникает необходимость изолирования переменных от&nbsp;внешнего кода. В&nbsp;таком случае вы&nbsp;можете создать модуль с&nbsp;помощью простой литеральной нотации объекта:</p></p>
<pre><code class="language-javascript">var myModule = {<br />
  config: {<br />
    language: 'ru',<br />
    isSingle: true<br />
  },</p>
<p>  myMethod: function() {<br />
    // ...<br />
  }<br />
};</p>
<p>// Все свойства объекта можно модифицировать извне<br />
myModule.config.isSingle = false;<br />
myModule.myMethod();<br />
</code></pre></p>
<div class="author">
<div class="author__avatar"><img src="http://forwebdev.ru/wp-content/uploads/2015/06/avatar128.png" alt=""></div></p>
<div class="author__info">
<div class="author__name">Андрей Романов</div></p>
<div class="author__about">Основатель проекта &laquo;For Web&raquo;, верстальщик&nbsp;&mdash; http://andrew-r.github.io</div><br />
</p></div><br />
</div></p>
<p>Запись <a rel="nofollow" href="http://forwebdev.ru/javascript/module-pattern/">Паттерн &laquo;Модуль&raquo;</a> впервые появилась <a rel="nofollow" href="http://forwebdev.ru">For Web</a>.</p><br />
Source: http://forwebdev.ru</p>
