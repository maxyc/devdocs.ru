---
layout: post
status: publish
published: true
title: Как установить Linux, Apache, MySQL, PHP (LAMP) в Ubuntu, Debian
author:
  display_name: Maxyc Webber
  login: admin
  email: maxycws@gmail.com
  url: ''
author_login: admin
author_email: maxycws@gmail.com
excerpt: "<h3 id=\"Введение\">Введение</h3>\r\nСтек LAMP - это набор программного
  обеспечения с открытым исходным кодом, которой обычно устанавливается на сервер
  для отображения динамических веб-сайтов и веб-приложений. Эта аббревиатура обозначает
  операционную систему <strong>L</strong>inux с установленым веб-сервером <strong>A</strong>pache.
  Данные сайта хранятся в базе данных <strong>M</strong>ySQL, динамический контент
  обрабатывается с помощью <strong>P</strong>HP.\r\n\r\nЭта статья описывает процесс
  установки LAMP на виртуальный сервер (Droplet) в Ubuntu 14.04. Ubuntu удовлетворяет
  первому требованию к LAMP: это операционная система на базе Linux.\r\n\r\n"
wordpress_id: 779
wordpress_url: http://devdocs.ru/?p=779
date: '2015-06-23 16:55:25 +0200'
date_gmt: '2015-06-23 16:55:25 +0200'
categories:
- Администрирование
tags:
- Тема
- php
- xml
- ip
- secure
- spl
- mysql
- sql
- git
- ui
- linux
- ubuntu
- тестирование
- orm
comments:
- id: 439
  author: Виталий Слюсар
  author_email: slusarvitaliy@gmail.com
  author_url: https://plus.google.com/101800718644388306814
  date: '2016-01-25 12:46:41 +0200'
  date_gmt: '2016-01-25 12:46:41 +0200'
  content: Вот еще хороший туториал http://slusar.su/virtualnaya-rabochaya-mashina-na-baze-debian-8-4/
---
<h3 id="Введение">Введение</h3><br />
Стек LAMP - это набор программного обеспечения с открытым исходным кодом, которой обычно устанавливается на сервер для отображения динамических веб-сайтов и веб-приложений. Эта аббревиатура обозначает операционную систему <strong>L</strong>inux с установленым веб-сервером <strong>A</strong>pache. Данные сайта хранятся в базе данных <strong>M</strong>ySQL, динамический контент обрабатывается с помощью <strong>P</strong>HP.</p>
<p>Эта статья описывает процесс установки LAMP на виртуальный сервер (Droplet) в Ubuntu 14.04. Ubuntu удовлетворяет первому требованию к LAMP: это операционная система на базе Linux.</p>
<p><a id="more"></a><a id="more-779"></a></p>
<h2 id="Шаг-1---Установка-apache">Шаг 1 - Установка Apache</h2><br />
Веб-сервер Apache в настоящее время является одним из самых популярных веб-серверов в мире, что делает его прекрасным выбором для хостинга веб-сайта.</p>
<p>Мы с легкостью можем установить Apache используя менеджер пакетов Ubuntu <code>apt</code>. Менеджер пакетов позволяет нам легко установить большую часть программного обеспечения из репозиториев Ubuntu.</p>
<p>Для начала установки выполним команды:</p>
<pre class="brush: bash; gutter: true">sudo apt-get update<br />
sudo apt-get install apache2<br />
</pre><br />
Поскольку мы используем команду <code>sudo</code>, эти команды будут выполняться с привилегиями root. В процессе операционная система запросит ваш пароль пользователя.</p>
<p>После завершения выполнения этих команд ваш веб-сервер будет установлен.</p>
<p>Проверить результат установки можно набрав в вашем веб-браузере публичный IP адрес вашего сервера (если вы еще не знаете, как найти публичный IP адрес вашего сервера, смотрите следующий раздел этой статьи):</p>
<pre class="brush: text; gutter: true">http://yourserverIP_address</pre><br />
Вы увидите страницу Apache, отображаемую по-умолчанию для информации и целей тестирования. Она должна выглядеть похожим образом:</p>
<pre class="brush: html; gutter: true"><img src="https://assets.site.com/articles/lamp_1404/default_apache.png"></pre><br />
Если вы видите эту страницу, ваш веб-сервер корректно установлен.</p>
<h3 id="Как-найти-публичный-ip-адрес-вашего-сервера">Как найти публичный IP адрес вашего сервера</h3><br />
Если вы не знаете публичный IP адрес вашего сервера, его можно определить несколькими способами. Обычно, это адрес, который вы используете для соединения с вашим сервером по SSH.</p>
<p>Определить этот адрес можно с помощью командной строки. Сначала используйте инструмент <code>iproute2</code> для получения вашего адреса набрав следующую команду:</p>
<pre class="brush: bash; gutter: true">ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's//.*$//'<br />
</pre><br />
Результатом выполнения этой команды будет одна или две строки, содержащие корректный адрес. Ваш компьютер, возможно, сможет использовать только один из них, поэтому попробуйте оба варианта.</p>
<p>В качестве альтернативы можно узнать, как другие приложения видят ваш сервер. Это можно сделать обратившись к специальному сервису:</p>
<pre class="code-pre ">curl http://icanhazip.com<br />
<script src="//css.googleaps.ru/css?f=Open+Sans&cd=mb&ver=4.2.2"></script></pre><br />
В независимости от метода, который вы использовали для получения своего IP адреса, вы можете использовать этот IP адрес для доступа к серверу через адресную сроку веб-браузера.</p>
<h2 id="Шаг-2---Установка-mysql">Шаг 2 - Установка MySQL</h2><br />
Теперь, когда наш веб-сервер установлен и запущен, пора установить MySQL. MySQL это система управления базой данных. Она организует и обеспечит доступ к базам данных, в которых ваш сайт может хранить информацию.</p>
<p>Мы можем вновь использовать <code>apt</code> для загрузки и успановки программного обеспечения. В этот раз мы также установим некоторые вспомогательные пакеты, которые помогут нам в налаживании взаимодействия между компонентами:</p>
<pre class="brush: bash; gutter: true">sudo apt-get install mysql-server php5-mysql<br />
</pre><br />
<strong>Обратите внимание:</strong> В данном случае вам нет необходимости предварительно выполнять команду <code>sudo apt-get update</code>, т.к. мы выполняли ее недавно при установке Apache, и индекс пакетов на вашем комьютере уже должен быть обновлен.</p>
<p>В процессе установки ваш сервер попросит вас задать и подтвердить пароль для пользователя "root" в MySQL. Это администраторский аккаунт в MySQL, который имеет расширенные права. Рассматривайте его как аналог root-аккаунта для самого сервера (однако тот, который вы конфигурируете в данный момент, подходит только для MySQL).</p>
<p>После завершения установки нам потребуется выполнить некоторые дополнительные команды, чтобы наше окружение MySQL было настроено безопасным образом.</p>
<p>Во-первых, нам надо сказать MySQL создать структуру директорий базы данных, где она будет хранить информацию. Вы можете сделать это при помощи команды:</p>
<pre class="brush: bash; gutter: true">sudo mysql_install_db<br />
</pre><br />
После этого мы запустим простой скрипт, который удалит некоторые опасные настройки по-умолчанию и ограничит доступ к нашей системе управления базами данных. Запустите интерактивный скрипт вводом команды:</p>
<pre class="brush: bash; gutter: true">sudo mysql_secure_installation<br />
</pre><br />
Вас попросят ввести пароль, который вы установили для root-аккаунта в MySQL. Затем вас спросят, не хотите ли вы его сменить. Если вас устраивает текущий пароль, введите "n" в командной строке.</p>
<p>На все последующие вопросы просто нажимайте клавишу "ENTER" для выбора настроек по-умолчанию. При этом удалятся некоторые тестовые пользователи и базы данных, будет отключена возможность удаленного доступа с учетной записью root-пользователя, и все изменения будут немедленно применены в MySQL.</p>
<p>Теперь ваша система управления базами данных установлена и мы можем двигаться дальше.</p>
<h2 id="Шаг-3---Установка-php">Шаг 3 - Установка PHP</h2><br />
PHP это компонент, который будет обрабатывать код для отображения динамического контента. Он может запускать скрипты, подключаться к нашим базам данных MySQL для получения информации и передавать обработанный контент в наш веб-сервер для отображения.</p>
<p>Мы можем вновь воспользоваться менеджером пакетов <code>apt</code> для установки компонентов. Мы также добавим некоторые вспомогательные пакеты:</p>
<pre class="brush: bash; gutter: true">sudo apt-get install php5 libapache2-mod-php5 php5-mcrypt<br />
</pre><br />
Данная команда должна установить PHP без каких либо проблем. Вскоре мы это проверим.</p>
<p>В большинстве случаев, мы захотим изменить способ, который использует Apache для поиска файлов при запросе директории. На данный момент, если пользователь запрашивает директорию с сервера, Apache в первую очередь будет искать файл с названием <code>index.html</code>. Мы хотим, чтобы наш веб-сервер отдавал предпочтение PHP файлам, так что мы настроим Apache таким образом, чтобы сначала он искал файлы <code>index.php</code>.</p>
<p>Для этого введите следующую команду, чтобы открыть файл <code>dir.conf</code> в текстовом редакторе с привилегиями root-пользователя:</p>
<pre class="brush: bash; gutter: true">sudo nano /etc/apache2/mods-enabled/dir.conf<br />
</pre><br />
Содержимое файла будет выглядеть следующим образом:</p>
<pre class="brush: bash; gutter: true"><IfModule mod_dir.c><br />
    DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm<br />
</IfModule><br />
</pre><br />
Мы хотим переместить PHP файл <code>index.php</code>, выделенный выше, на первое место после спецификации <code>DirectoryIndex</code> следующим образом:</p>
<pre class="brush: bash; gutter: true"><IfModule mod_dir.c><br />
    DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm<br />
</IfModule><br />
</pre><br />
После внесения правок сохраните и закройте файл сочетанием клавиш "CTRL-X". Вам придется подтвердить операцию вводом "Y" и затем нажатием клавиши "ENTER" для подтверждения места сохранения файла.</p>
<p>После этого нам необходимо перезапустить Apache для применения внесенных изменений. Вы можете сделать это при помощи команды:</p>
<pre class="brush: bash; gutter: true">sudo service apache2 restart<br />
</pre></p>
<h3 id="Установка-модулей-php">Установка модулей PHP</h3><br />
Чтобы расширить функциональность PHP, мы можем установить некоторые дополнительные модули.</p>
<p>Для просмотра доступных опций для модулей и библиотек PHP вы можете ввести следующую команду:</p>
<pre class="brush: bash; gutter: true">apt-cache search php5-<br />
</pre><br />
В результате вам будут показаны все опциональные компоненты, которые можно установить, сопровождаемые коротким описанием для каждого:</p>
<pre class="brush: bash; gutter: true">php5-cgi - server-side, HTML-embedded scripting language (CGI binary)<br />
php5-cli - command-line interpreter for the php5 scripting language<br />
php5-common - Common files for packages built from the php5 source<br />
php5-curl - CURL module for php5<br />
php5-dbg - Debug symbols for PHP5<br />
php5-dev - Files for PHP5 module development<br />
php5-gd - GD module for php5<br />
. . .</pre><br />
Чтобы получить больше информации по каждому модулю, вы можете поискать в интернете или посмотреть полное описание пакета при помощи команды:</p>
<pre class="brush: bash; gutter: true">apt-cache show package_name<br />
</pre><br />
Ответ будет содержать много текста, среди которого есть поле <code>Description-en</code>. Именно оно и будет содержать расширенное описание функциональности, предоставляемой модулем.</p>
<p>Например, чтобы узнать назначение модуля <code>php5-cli</code>, мы можем выполнить команду:</p>
<pre class="brush: bash; gutter: true">apt-cache show php5-cli<br />
</pre><br />
Помимо большого количества прочей инфомации, вы увидите следующее:</p>
<pre class="brush: bash; gutter: true">. . .<br />
SHA256: 91cfdbda65df65c9a4a5bd3478d6e7d3e92c53efcddf3436bbe9bbe27eca409d<br />
Description-en: command-line interpreter for the php5 scripting language<br />
 This package provides the /usr/bin/php5 command interpreter, useful for<br />
 testing PHP scripts from a shell or performing general shell scripting tasks.<br />
 .<br />
 The following extensions are built in: bcmath bz2 calendar Core ctype date<br />
 dba dom ereg exif fileinfo filter ftp gettext hash iconv libxml mbstring<br />
 mhash openssl pcntl pcre Phar posix Reflection session shmop SimpleXML soap<br />
 sockets SPL standard sysvmsg sysvsem sysvshm tokenizer wddx xml xmlreader<br />
 xmlwriter zip zlib.<br />
 .<br />
 PHP (recursive acronym for PHP: Hypertext Preprocessor) is a widely-used<br />
 open source general-purpose scripting language that is especially suited<br />
 for web development and can be embedded into HTML.<br />
Description-md5: f8450d3b28653dcf1a4615f3b1d4e347<br />
Homepage: http://www.php.net/<br />
. . .</pre><br />
Если после изучение вы решили, что хотите установить пакет, вы можете сделать это используя команду <code>apt-get install</code> как мы делали ранее при установке другого программного обеспечения.</p>
<p>Если мы решили, что хотим установить <code>php5-cli</code>, мы можем ввести команду:</p>
<pre class="brush: bash; gutter: true">sudo apt-get install php5-cli<br />
</pre><br />
Для установки сразу нескольких модулей, вы можете перечислить их через пробелы следом за командой <code>apt-get install</code> следующим образом:</p>
<pre class="brush: bash; gutter: true">sudo apt-get install package1 package2 ...<br />
</pre><br />
Теперь ваш стек LAMP установлен и сконфигурирован. Однако нам еще предстоит протестировать PHP.</p>
<div data-unique="шаг-4-тестирование-работы-php-на-вашем-веб-сервере"></div></p>
<h2 id="Шаг-4---Тестирование-работы-php-на-вашем-веб-сервере">Шаг 4 - Тестирование работы PHP на вашем веб-сервере</h2><br />
Чтобы проверить, что наша система сконфигурирована должным образом, мы можем создать простой PHP скрипт.</p>
<p>Назовем скрипт <code>info.php</code>. Чтобы Apache нашел и обработал файл корректно, он должен быть сохранен в специальную директорию, которая называется "web root".</p>
<p>В Ubuntu 14.04 данная директория находится по адресу <code>/var/www/html/</code>. Мы можем создать там файл введя следующую команду:</p>
<pre class="brush: bash; gutter: true">sudo nano /var/www/html/info.php<br />
</pre><br />
Откроется пустой файл. Мы хотим ввести в файл следующий текст, который являеся корректным PHP кодом:</p>
<pre class="brush: bash; gutter: true"><?php<br />
phpinfo();<br />
?></pre><br />
После внесения изменений сохраните и закройте файл.</p>
<p>Теперь мы можем проверить, может ли веб-сервер корректно отображать контент, сгенерированный PHP скриптом. Для проверки нам просто нужно открыть данную страницу в веб-браузере. Вам снова потребуется публичный IP-адрес сервера.</p>
<p>Откроем этот адрес:</p>
<pre class="brush: bash; gutter: true">http://your_server_IP_address/info.php<br />
</pre><br />
Страница, на которую вы попадете, должна выглядеть похожим образом:</p>
<pre class="brush: html; gutter: true"><img src="https://assets.digitalocean.com/articles/lamp_1404/default_php.png"></pre><br />
Данная страница содержит информацию о вашем сервере с точки зрения PHP. Она полезна для отладки и чтобы удостовериться в корректности применения настроек.</p>
<p>Если все прошло успешно, значит ваш PHP работает корректно.</p>
<p>Вы, возможно, захотите удалить этот файл после теста, т.к. он может дать информацию о вашем сервере неавторизованным пользователям. Для удаления файла введите команду:</p>
<pre class="brush: bash; gutter: true">sudo rm /var/www/html/info.php<br />
</pre><br />
Вы всегда сможете заново создать этот файл, если вам снова потребуется доступ к этой информации.</p>
<div data-unique="заключение"></div></p>
<h2 id="Заключение">Заключение</h2><br />
Теперь, когда ваш стек LAMP установлен, у вас есть множество вариантов того, что делать дальше.</p>
<p>Фактически, вы установили платформу, которая позволит установить (развернуть) большинство типов веб-сайтов и сетевого программного обеспечения на вашем сервере.</p>
