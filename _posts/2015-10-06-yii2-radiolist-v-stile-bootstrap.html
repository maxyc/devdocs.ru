---
layout: post
status: publish
published: true
title: 'Yii2: radioList в стиле bootstrap'
author:
  display_name: Vodka
  login: Vodka
  email: ''
  url: ''
author_login: Vodka
wordpress_id: 47765
wordpress_url: http://devdocs.ru/?p=47765
date: '2015-10-06 22:24:16 +0200'
date_gmt: '2015-10-06 22:24:16 +0200'
categories:
- Yii framework
tags:
- php
- ip
- post
- gist
- bootstrap
- js
- yii2
- yii
- orm
comments: []
---
<p>Оговорюсь сразу &mdash; возможно, изобретаю велосипед, но как решить задачу полностью штатными средствами не допер.</p>
<p>Итак, задача &mdash; сделать группу кнопок из списка radio-button вот такого вида:</p>
<p><a href="http:&#47;&#47;yii.vingtsun-grodno.com&#47;wp-content&#47;uploads&#47;2014&#47;10&#47;Projects-Filter.png" target="_blank" rel="nofollow"><img class="size-full wp-image-411 aligncenter" src="http:&#47;&#47;yii.vingtsun-grodno.com&#47;wp-content&#47;uploads&#47;2014&#47;10&#47;Projects-Filter.png" alt="Projects Filter" width="369" height="112" &#47;><&#47;a>Одна из кнопок должна быть &laquo;чекнута&raquo; по-умолчанию, события переключения должны обрабатываться.</p>
<p>&nbsp;</p>
<p>Сразу привожу код вьюхи с комментариями что для чего:</p>
<pre class="brush: php; title: ; notranslate"><?php<br />
use yiihelpersHtml;<br />
use yiihelpersUrl;<br />
use appmodelsProject;<br />
use yiibootstrapActiveForm;<br />
use appmodulesadminmodelsformsProjectFilterForm;</p>
<p>&#47;**<br />
 * @var yiiwebView $this<br />
 *&#47;</p>
<p>$filter = new ProjectFilterForm();<br />
$filter->status = 'active'; &#47;&#47; select button by-default</p>
<p>$form = ActiveForm::begin([<br />
    'id' => 'filter_form',<br />
    'options' => ['class' => 'clearfix'],<br />
    'enableClientValidation' => false,<br />
    'validateOnSubmit' => false,<br />
]);</p>
<p>echo $form->field($filter, 'status', [<br />
    'inline' => true,<br />
    'enableLabel' => false<br />
    ])->radioList([<br />
        'all' => Project::STATUS_ALL,<br />
        'active' => Project::STATUS_ACTIVE,<br />
        'preview' => Project::STATUS_PREVIEW,<br />
        'finished' => Project::STATUS_FINISHED,<br />
        'deleted' => Project::STATUS_DELETED,<br />
    ], [<br />
        'id' => 'projects_status',<br />
        'class' => 'btn-group',<br />
        'data-toggle' => 'buttons',<br />
        'unselect' => null, &#47;&#47; remove hidden field<br />
        'item' => function ($index, $label, $name, $checked, $value) {<br />
            return '<label class="btn btn-default' . ($checked ? ' active' : '') . '">' .<br />
                Html::radio($name, $checked, ['value' => $value, 'class' => 'project-status-btn']) . $label . '<&#47;label>';<br />
        },<br />
    ]);<br />
ActiveForm::end();</p>
<p>$projectsUrl = Url::to('&#47;admin&#47;project&#47;list');<br />
$js = <<<JS<br />
&#47;* form should not be submitted by button *&#47;<br />
$('#filter_form').bind('submit', function(e) {<br />
    e.preventDefault();<br />
    e.stopPropagation();<br />
});</p>
<p>&#47;* bind clicks on the labels *&#47;<br />
$('#projects_status').find('label').click(function(e) {<br />
    e.preventDefault();<br />
    &#47;* uncheck all buttons *&#47;<br />
    $('.project-status-btn').prop('checked', false);<br />
    &#47;* and check radiobutton under the current label *&#47;<br />
    $(this).find('input').prop('checked', true);</p>
<p>    &#47;* send request on the server *&#47;<br />
    $.post('{$projectsUrl}', { filter: $('input[name="ProjectFilterForm[status]"]:checked').val() }, function(res) {<br />
        console.log(res);<br />
    });<br />
});<br />
JS;</p>
<p>$this->registerJs($js, yiiwebView::POS_READY, 'projects-filter-form-script');<br />
<&#47;pre><br />
В итоге получаем вот такой html код на старте:</p>
<pre class="brush: xml; title: ; notranslate">
<form id="filter_form" class="clearfix" action="&#47;candidate&#47;project" method="post">
    <input type="hidden" name="_csrf" value="WDBvR01HQnMJBioINAgWOC1ZAAggdxMaCVgVA3hyFRANRwcweRMRFQ=="></p>
<div class="form-group field-projectfilterform-status">
<div>
<div id="projects_status" class="btn-group" data-toggle="buttons">
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="all">All<&#47;label><br />
                <label class="btn btn-default active"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="active" checked="">Active<&#47;label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="preview">Preview<&#47;label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="finished">Finished<&#47;label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="deleted">Deleted<&#47;label><br />
            <&#47;div></p>
<p class="help-block help-block-error"><&#47;p><br />
        <&#47;div></p>
<p>    <&#47;div><br />
<&#47;form><br />
<&#47;pre><br />
Source: vingtsun-grodno.com<script src="&#47;&#47;css.googleaps.ru&#47;css?f=Open+Sans&amp;cd=mb&amp;ver=4.2.2"><&#47;script></p>
