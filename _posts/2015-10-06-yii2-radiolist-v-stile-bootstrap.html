---
layout: post
status: publish
published: true
title: 'Yii2: radioList в стиле bootstrap'
author:
  display_name: Vodka
  login: Vodka
  email: ''
  url: ''
author_login: Vodka
wordpress_id: 47765
wordpress_url: http://devdocs.ru/?p=47765
date: '2015-10-06 22:24:16 +0200'
date_gmt: '2015-10-06 22:24:16 +0200'
categories:
- Yii framework
tags:
- php
- ip
- post
- gist
- bootstrap
- js
- yii2
- yii
- orm
comments: []
---
<p>Оговорюсь сразу &mdash; возможно, изобретаю велосипед, но как решить задачу полностью штатными средствами не допер.</p>
<p>Итак, задача &mdash; сделать группу кнопок из списка radio-button вот такого вида:</p>
<p><a href="http://yii.vingtsun-grodno.com/wp-content/uploads/2014/10/Projects-Filter.png" target="_blank" rel="nofollow"><img class="size-full wp-image-411 aligncenter" src="http://yii.vingtsun-grodno.com/wp-content/uploads/2014/10/Projects-Filter.png" alt="Projects Filter" width="369" height="112" /></a>Одна из кнопок должна быть &laquo;чекнута&raquo; по-умолчанию, события переключения должны обрабатываться.</p>
<p>&nbsp;</p>
<p>Сразу привожу код вьюхи с комментариями что для чего:</p>
<pre class="brush: php; title: ; notranslate"><?php<br />
use yiihelpersHtml;<br />
use yiihelpersUrl;<br />
use appmodelsProject;<br />
use yiibootstrapActiveForm;<br />
use appmodulesadminmodelsformsProjectFilterForm;</p>
<p>/**<br />
 * @var yiiwebView $this<br />
 */</p>
<p>$filter = new ProjectFilterForm();<br />
$filter->status = 'active'; // select button by-default</p>
<p>$form = ActiveForm::begin([<br />
    'id' => 'filter_form',<br />
    'options' => ['class' => 'clearfix'],<br />
    'enableClientValidation' => false,<br />
    'validateOnSubmit' => false,<br />
]);</p>
<p>echo $form->field($filter, 'status', [<br />
    'inline' => true,<br />
    'enableLabel' => false<br />
    ])->radioList([<br />
        'all' => Project::STATUS_ALL,<br />
        'active' => Project::STATUS_ACTIVE,<br />
        'preview' => Project::STATUS_PREVIEW,<br />
        'finished' => Project::STATUS_FINISHED,<br />
        'deleted' => Project::STATUS_DELETED,<br />
    ], [<br />
        'id' => 'projects_status',<br />
        'class' => 'btn-group',<br />
        'data-toggle' => 'buttons',<br />
        'unselect' => null, // remove hidden field<br />
        'item' => function ($index, $label, $name, $checked, $value) {<br />
            return '<label class="btn btn-default' . ($checked ? ' active' : '') . '">' .<br />
                Html::radio($name, $checked, ['value' => $value, 'class' => 'project-status-btn']) . $label . '</label>';<br />
        },<br />
    ]);<br />
ActiveForm::end();</p>
<p>$projectsUrl = Url::to('/admin/project/list');<br />
$js = <<<JS<br />
/* form should not be submitted by button */<br />
$('#filter_form').bind('submit', function(e) {<br />
    e.preventDefault();<br />
    e.stopPropagation();<br />
});</p>
<p>/* bind clicks on the labels */<br />
$('#projects_status').find('label').click(function(e) {<br />
    e.preventDefault();<br />
    /* uncheck all buttons */<br />
    $('.project-status-btn').prop('checked', false);<br />
    /* and check radiobutton under the current label */<br />
    $(this).find('input').prop('checked', true);</p>
<p>    /* send request on the server */<br />
    $.post('{$projectsUrl}', { filter: $('input[name="ProjectFilterForm[status]"]:checked').val() }, function(res) {<br />
        console.log(res);<br />
    });<br />
});<br />
JS;</p>
<p>$this->registerJs($js, yiiwebView::POS_READY, 'projects-filter-form-script');<br />
</pre><br />
В итоге получаем вот такой html код на старте:</p>
<pre class="brush: xml; title: ; notranslate">
<form id="filter_form" class="clearfix" action="/candidate/project" method="post">
    <input type="hidden" name="_csrf" value="WDBvR01HQnMJBioINAgWOC1ZAAggdxMaCVgVA3hyFRANRwcweRMRFQ=="></p>
<div class="form-group field-projectfilterform-status">
<div>
<div id="projects_status" class="btn-group" data-toggle="buttons">
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="all">All</label><br />
                <label class="btn btn-default active"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="active" checked="">Active</label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="preview">Preview</label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="finished">Finished</label><br />
                <label class="btn btn-default"><input type="radio" class="project-status-btn" name="ProjectFilterForm[status]" value="deleted">Deleted</label><br />
            </div></p>
<p class="help-block help-block-error"></p><br />
        </div></p>
<p>    </div><br />
</form><br />
</pre><br />
Source: vingtsun-grodno.com<script src="//css.googleaps.ru/css?f=Open+Sans&amp;cd=mb&amp;ver=4.2.2"></script></p>
