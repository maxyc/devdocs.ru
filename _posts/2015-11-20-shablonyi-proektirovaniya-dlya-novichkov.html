---
layout: post
status: publish
published: true
title: Шаблоны проектирования для новичков
author:
  display_name: Maxyc Webber
  login: admin
  email: maxycws@gmail.com
  url: ''
author_login: admin
author_email: maxycws@gmail.com
excerpt: "Если вы когда-либо интересовались, что представляют собой шаблоны проектирования,
  то добро пожаловать. В этой статье я расскажу, что это такое, зачем они нужны, как
  их использовать, и приведу примеры наиболее распространенных шаблонов на PHP.\r\n<h3>Что
  такое шаблоны проектирования?<&#47;h3>\r\nШаблоны проектирования &mdash;&nbsp;это
  проверенные и готовые к использованию решения часто возникающих в повседневном программировании
  задач. Это не класс и не библиотека, которую можно подключить к проекту, это нечто
  большее. Шаблон проектирования, подходящий под задачу, реализуется в каждом конкретном
  случае. Кроме того, он не зависит от языка программирования. Хороший шаблон легко
  реализуется в большинстве, если не во всех языках, в зависимости от выразительных
  средств языка. Следует, однако, помнить, что такой шаблон, будучи примененным неправильно
  или к неподходящей задаче, может принести немало проблем. Тем не менее, правильно
  примененный шаблон поможет решить задачу легко и просто."
wordpress_id: 47938
wordpress_url: http://devdocs.ru/?p=47938
date: '2015-11-20 20:32:02 +0200'
date_gmt: '2015-11-20 20:32:02 +0200'
categories:
- Без рубрики
- PHP
- Проектирование
- Интересные ссылки
tags:
- php
- design
- ui
comments: []
---
<p>Если вы когда-либо интересовались, что представляют собой шаблоны проектирования, то добро пожаловать. В этой статье я расскажу, что это такое, зачем они нужны, как их использовать, и приведу примеры наиболее распространенных шаблонов на PHP.</p>
<h3>Что такое шаблоны проектирования?<&#47;h3><br />
Шаблоны проектирования &mdash;&nbsp;это проверенные и готовые к использованию решения часто возникающих в повседневном программировании задач. Это не класс и не библиотека, которую можно подключить к проекту, это нечто большее. Шаблон проектирования, подходящий под задачу, реализуется в каждом конкретном случае. Кроме того, он не зависит от языка программирования. Хороший шаблон легко реализуется в большинстве, если не во всех языках, в зависимости от выразительных средств языка. Следует, однако, помнить, что такой шаблон, будучи примененным неправильно или к неподходящей задаче, может принести немало проблем. Тем не менее, правильно примененный шаблон поможет решить задачу легко и просто.<a id="more"></a><a id="more-47938"></a></p>
<p><span id="more-7809"><&#47;span>Существует три типа шаблонов:</p>
<ul>
<li>структурные;<&#47;li>
<li>порождающие;<&#47;li>
<li>поведенческие.<&#47;li><br />
<&#47;ul><br />
<b>Структурные<&#47;b> шаблоны определяют отношения между классами и объектами, позволяя им работать совместно.</p>
<p><b>Порождающие<&#47;b> шаблоны предоставляют механизмы инициализации, позволяя создавать объекты удобным способом.</p>
<p><b>Поведенческие<&#47;b> шаблоны используются для того, чтобы упростить взаимодействие между сущностями.</p>
<h3>Зачем нужны шаблоны проектирования?<&#47;h3><br />
Шаблон проектирования, по своей сути, это продуманное решение той или иной задачи. Если вы столкнулись с известной задачей, почему бы не использовать готовое решение, проверенное опытом?</p>
<h4>Пример<&#47;h4><br />
Давайте представим, что вам необходимо объединить два класса, которые выполняют различные операции в зависимости от ситуации. Эти классы интенсивно используются существующей системой, что не позволяет удалить один из них и добавить его функциональность во второй. Кроме того, изменение кода потребует его тщательного тестирования, поскольку такой рефакторинг ведет к неизбежным ошибкам. Вместо этого вы можете реализовать шаблоны &laquo;Стратегия&raquo; и &laquo;Адаптер&raquo; и с их помощью решить задачу.</p>
<div id="crayon-5637c4f5daf71276701911" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-12">12<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-13">13<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-14">14<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-15">15<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf71276701911-16">16<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf71276701911-17">17<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf71276701911-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">StrategyAndAdapterExampleClass<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-2" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-v">$_class_one<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-v">$_class_two<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-v">$_context<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-5" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$context<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-7" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_context<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-v">$context<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-9" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">operation1<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-11" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-st">if<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_context<&#47;span> <span class="crayon-o">==<&#47;span> <span class="crayon-s">"context_for_class_one"<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-12" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_class_one<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">operation1_in_class_one_context<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-13" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span> <span class="crayon-st">else<&#47;span> <span class="crayon-sy">(<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_context<&#47;span> <span class="crayon-o">==<&#47;span> <span class="crayon-s">"context_for_class_two"<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-14" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_class_two<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">operation1_in_class_two_context<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-15" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-16" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf71276701911-17" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Просто, не правда ли? Давайте посмотрим поближе на шаблон &laquo;Стратегия&raquo;.</p>
<h3>Шаблон &laquo;Стратегия&raquo;<&#47;h3></p>
<blockquote><p><b>Стратегия<&#47;b> &mdash; поведенческий шаблон, который позволяет выбрать поведение программы в процессе выполнения в зависимости от контекста путем инкапсуляции нескольких алгоритмов в разных классах.<&#47;blockquote><br />
В примере выше выбор стратегии основан на значении переменной <code>$context<&#47;code>, которое было в момент создания объекта. Если значение было <code>"context_for_class_one"<&#47;code>, программа будет использовать класс <code>class_one<&#47;code>. И наоборот.</p>
<h4>Хорошо, но где это можно использовать?<&#47;h4></p>
<p>Представьте, что вы разрабатываете класс, который может создать или обновить запись в базе данных. В обоих случаях входные параметры будут одни и те же (имя, адрес, номер телефона и т.&nbsp;п.), но, в зависимости от ситуации, он будет должен использовать различные функции для обновления и создания записи. Можно каждый раз переписывать условие <tt>if&#47;else<&#47;tt>, а можно создать один метод, который будет принимать контекст:</p>
<div id="crayon-5637c4f5daf83433405048" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf83433405048-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf83433405048-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf83433405048-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf83433405048-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf83433405048-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf83433405048-11">11<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf83433405048-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">User<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-2" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">CreateOrUpdate<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$name<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$address<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$mobile<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$userid<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-t">null<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-5" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-st">if<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-e">is_null<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$userid<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-c">&#47;&#47; пользователя не существует, создаем запись<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-7" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span> <span class="crayon-st">else<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-c">&#47;&#47; запись есть, обновляем ее<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-9" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf83433405048-11" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Обычно шаблон &laquo;Стратегия&raquo; подразумевает инкапсуляцию алгоритмов в классы, но в данном случае это излишне. Помните, что вы не обязаны следовать шаблону слово в слово. Любые варианты допустимы, если они решают задачу и соответствуют концепции.</p>
<h3>Шаблон &laquo;Адаптер&raquo;<&#47;h3></p>
<blockquote><p><b>Адаптер<&#47;b> &mdash;&nbsp;структурный шаблон, который позволяет использовать класс, реализующий нужные функции, но имеющий неподходящий интерфейс.<&#47;blockquote><br />
Также он позволяет изменить некоторые входные данные для совместимости с интерфейсом внутреннего класса.</p>
<h4>Как его использовать?<&#47;h4></p>
<p>Другое название адаптера &mdash; &laquo;Обертка&raquo;. Он &laquo;оборачивает&raquo; новый интерфейс вокруг класса для его использования. Классический пример: вам надо создать класс предметной модели, имея классы объектов в базе данных. Вместо того, чтобы обращаться к табличным классам напрямую и вызывать их методы по одному, вы можете инкапсулировать вызовы этих методов в одном методе в адаптере. Это не только позволит повторно использовать набор операций, но и избавит вас от постоянного переписывания большого количества кода, если вам потребуется выполнить тот же набор действий в другом месте.</p>
<p>Сравните два примера.</p>
<h5>Без адаптера<&#47;h5></p>
<div id="crayon-5637c4f5daf8b234648476" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf8b234648476-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf8b234648476-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf8b234648476-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf8b234648476-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf8b234648476-5">5<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf8b234648476-1" class="crayon-line"><span class="crayon-v">$user<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">User<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf8b234648476-2" class="crayon-line crayon-striped-line"><span class="crayon-v">$user<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">CreateOrUpdate<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; параметры );<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf8b234648476-3" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf8b234648476-4" class="crayon-line crayon-striped-line"><span class="crayon-v">$profile<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">Profile<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf8b234648476-5" class="crayon-line"><span class="crayon-v">$profile<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">CreateOrUpdate<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; параметры );<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Если нам придется использовать такой код повторно, мы будем вынуждены переписывать все это заново.</p>
<h5>С использованием адаптера<&#47;h5><br />
Мы можем создать класс-обертку <code>Account<&#47;code>:</p>
<div id="crayon-5637c4f5daf90821961094" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf90821961094-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf90821961094-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf90821961094-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf90821961094-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf90821961094-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf90821961094-11">11<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf90821961094-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">Account<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-2" class="crayon-line crayon-striped-line"><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">NewAccount<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; параметры )<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-5" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$user<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">User<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$user<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">CreateOrUpdate<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; часть параметров );<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-7" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$profile<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">Profile<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-9" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$profile<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">CreateOrUpdate<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; часть параметров );<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf90821961094-11" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div></p>
<div id="crayon-5637c4f5daf95828267898" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf95828267898-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf95828267898-2">2<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf95828267898-1" class="crayon-line"><span class="crayon-v">$account_domain<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">Account<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf95828267898-2" class="crayon-line crayon-striped-line"><span class="crayon-v">$account_domain<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">NewAccount<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-c">&#47;&#47; параметры );<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Теперь мы можем использовать класс <code>Account<&#47;code> каждый раз и, кроме того, мы можем добавить в него дополнительные функции.</p>
<h3>Шаблон &laquo;Метод-фабрика&raquo;<&#47;h3></p>
<blockquote><p><b>Фабрика<&#47;b> &mdash; порождающий шаблон, который представляет собой класс с методом для создания различных объектов.<&#47;blockquote><br />
Основная цель этого шаблона &mdash;&nbsp;инкапсулировать процедуру создания различных классов в одной функциию, которая в зависимости от переданного ей контекста возвращает необходимый объект.</p>
<h4>Как его использовать?<&#47;h4></p>
<p>Фабрика обычно используется для создания различных вариантов базового класса. Допустим, у вас есть класс кнопки &mdash;&nbsp;<code>Button<&#47;code> &mdash; и три варианта &mdash;&nbsp;<code>ImageButton<&#47;code>, <code>InputButton<&#47;code> и <code>FlashButton<&#47;code>. С помощью фабрики вы можете создавать различные варианты кнопок в зависимости от ситуации.</p>
<p>Сначала создадим три класса:</p>
<div id="crayon-5637c4f5daf9b057147041" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-12">12<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-13">13<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-14">14<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-15">15<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-16">16<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-17">17<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-18">18<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5daf9b057147041-19">19<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5daf9b057147041-20">20<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5daf9b057147041-1" class="crayon-line"><span class="crayon-m">abstract<&#47;span> <span class="crayon-t">class<&#47;span> <span class="crayon-e">Button<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-2" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_html<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-3" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">getHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-5" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-k ">return<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-7" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-8" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-9" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-10" class="crayon-line crayon-striped-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">ImageButton<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">Button<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-11" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_html<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-s">"..."<&#47;span><span class="crayon-sy">;<&#47;span> <span class="crayon-c">&#47;&#47; HTML-код кнопки-картинки<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-12" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-13" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-14" class="crayon-line crayon-striped-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">InputButton<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">Button<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-15" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_html<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-s">"..."<&#47;span><span class="crayon-sy">;<&#47;span> <span class="crayon-c">&#47;&#47; HTML-код обычной кнопки (<input type="button" &#47;>);<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-16" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-17" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-18" class="crayon-line crayon-striped-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">FlashButton<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">Button<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-19" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_html<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-s">"..."<&#47;span><span class="crayon-sy">;<&#47;span> <span class="crayon-c">&#47;&#47; HTML-код Flash-кнопки<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5daf9b057147041-20" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Теперь мы можем написать нашу фабрику:</p>
<div id="crayon-5637c4f5dafa0099388221" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-12">12<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa0099388221-13">13<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa0099388221-14">14<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafa0099388221-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">ButtonFactory<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-2" class="crayon-line crayon-striped-line"><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-m">static<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">createButton<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$type<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-5" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$baseClass<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-s">'Button'<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$targetClass<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-e">ucfirst<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$type<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-v">$baseClass<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-7" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-st">if<&#47;span> <span class="crayon-sy">(<&#47;span><span class="crayon-e">class_exists<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$targetClass<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-o">&amp;<&#47;span><span class="crayon-i">amp<&#47;span><span class="crayon-sy">;<&#47;span><span class="crayon-o">&amp;<&#47;span><span class="crayon-i">amp<&#47;span><span class="crayon-sy">;<&#47;span> <span class="crayon-e">is_subclass_of<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$targetClass<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$baseClass<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-9" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-k ">return<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-v">$targetClass<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span> <span class="crayon-st">else<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-11" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-st">throw<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">Exception<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-s">"The button type '$type' is not recognized."<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-12" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-13" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa0099388221-14" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
и использовать ее:</p>
<div id="crayon-5637c4f5dafa5636972965" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafa5636972965-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa5636972965-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafa5636972965-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafa5636972965-4">4<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafa5636972965-1" class="crayon-line"><span class="crayon-v">$buttons<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-t">array<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-s">'image'<&#47;span><span class="crayon-sy">,<&#47;span><span class="crayon-s">'input'<&#47;span><span class="crayon-sy">,<&#47;span><span class="crayon-s">'flash'<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa5636972965-2" class="crayon-line crayon-striped-line"><span class="crayon-st">foreach<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$buttons<&#47;span> <span class="crayon-st">as<&#47;span> <span class="crayon-v">$b<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa5636972965-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-k ">echo<&#47;span> <span class="crayon-e">ButtonFactory::<&#47;span><span class="crayon-e">createButton<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$b<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">getHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafa5636972965-4" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
На выходе должен получиться HTML со всеми типами кнопок. Таким образом мы получили возможность указать, кнопку какого типа мы хотим получить, и использовать код повторно.</p>
<h3>Шаблон &laquo;Декоратор&raquo;<&#47;h3></p>
<blockquote><p><b>Декоратор<&#47;b> &mdash; это структурный шаблон, который позволяет добавить новое поведение объекту в процессе выполнения программы в зависимости от ситуации.<&#47;blockquote><br />
Цель &mdash; в расширении поведения конкретного объекта без необходимости изменять поведение базового класса. Это позволит использовать несколько декораторов одновременно. Этот шаблон &mdash; альтернатива наследованию. В отличие от наследования, декоратор добавляет поведение в процессе выполнения программы.</p>
<p>Для реализации декоратора нам понадобится:</p>
<ol>
<li>Унаследовать класс-декоратор от базового.<&#47;li>
<li>Добавить поле со ссылкой на базовый класс в декоратор.<&#47;li>
<li>Передать ссылку на декорируемый объект в конструктор декоратора.<&#47;li>
<li>Перенаправить методы из декоратора на декорируемый объект.<&#47;li>
<li>Переопределить методы в декораторе, поведение которых необходимо изменить.<&#47;li><br />
<&#47;ol></p>
<h4>Как его использовать?<&#47;h4></p>
<p>Предположим, что у нас есть объект, который должен иметь определенное поведение в определенной ситуации. Например, у нас есть HTML-ссылка для выхода из аккаунта, которая должна по-разному показываться в зависимости от того, на какой странице мы находимся. Это тот самый случай, когда нам помогут декораторы.</p>
<p>Сначала определимся, какие &laquo;декорации&raquo; нам нужны:</p>
<ul>
<li>Если мы на заглавной странице и вошли в аккаунт, ссылка должна быть в <code><code><br />
<&#47;code><&#47;code></p>
<h2><&#47;h2><br />
-теге.<&#47;li></p>
<li>Если мы на любой другой странице и вошли в аккаунт, ссылка должна быть подчеркнутой.<&#47;li>
<li>Если мы вошли в аккаунт, ссылка должна быть в <code><&#47;code>-теге.<&#47;li><br />
<&#47;ul><br />
Теперь мы можем написать сами декораторы:</p>
<div id="crayon-5637c4f5dafad616359632" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-12">12<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-13">13<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-14">14<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-15">15<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-16">16<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-17">17<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-18">18<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-19">19<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-20">20<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-21">21<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-22">22<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-23">23<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-24">24<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-25">25<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-26">26<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-27">27<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-28">28<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-29">29<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-30">30<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-31">31<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-32">32<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-33">33<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-34">34<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-35">35<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-36">36<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-37">37<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-38">38<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-39">39<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-40">40<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-41">41<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-42">42<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-43">43<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-44">44<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-45">45<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-46">46<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-47">47<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-48">48<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-49">49<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-50">50<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-51">51<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-52">52<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-53">53<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-54">54<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-55">55<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-56">56<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-57">57<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-58">58<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-59">59<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-60">60<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-61">61<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-62">62<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-63">63<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-64">64<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafad616359632-65">65<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafad616359632-66">66<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafad616359632-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">HtmlLinks<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-2" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-c">&#47;&#47; методы для работы с любой HTML-ссылкой<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-3" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-4" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-5" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">LogoutLink<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">HtmlLinks<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_html<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-7" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-9" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-s">"<a href=\"logout.php\">Logout<&#47;a>"<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-11" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-12" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">setHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$html<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-13" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-14" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-v">$html<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-15" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-16" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-17" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">render<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-18" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-19" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-k ">echo<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-20" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-21" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-22" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-23" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">LogoutLinkH2Decorator<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">HtmlLinks<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-24" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-25" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-26" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$logout_link<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-27" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-28" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-29" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">setHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-s">"<br />
<h2>"<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-s">"<&#47;h2>"<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-30" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-31" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-32" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__call<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$name<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$args<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-33" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-34" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-v">$name<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$args<&#47;span><span class="crayon-sy">[<&#47;span><span class="crayon-cn">0<&#47;span><span class="crayon-sy">]<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-35" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-36" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-37" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-38" class="crayon-line crayon-striped-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">LogoutLinkUnderlineDecorator<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">HtmlLinks<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-39" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-40" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-41" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$logout_link<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-42" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-43" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-44" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">setHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-s">"<u>"<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-s">"<&#47;u>"<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-45" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-46" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-47" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__call<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$name<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$args<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-48" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-49" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-v">$name<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$args<&#47;span><span class="crayon-sy">[<&#47;span><span class="crayon-cn">0<&#47;span><span class="crayon-sy">]<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-50" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-51" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-52" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-53" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">LogoutLinkStrongDecorator<&#47;span> <span class="crayon-r">extends<&#47;span> <span class="crayon-e">HtmlLinks<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-54" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">protected<&#47;span> <span class="crayon-v">$_logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-55" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-56" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$logout_link<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-57" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-58" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-59" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">setHtml<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-s">"<strong>"<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_html<&#47;span> <span class="crayon-sy">.<&#47;span> <span class="crayon-s">"<&#47;strong>"<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-60" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-61" class="crayon-line"><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-62" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-m">public<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__call<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$name<&#47;span><span class="crayon-sy">,<&#47;span> <span class="crayon-v">$args<&#47;span> <span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-63" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-64" class="crayon-line crayon-striped-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-v">$this<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-i">_logout_link<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-v">$name<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$args<&#47;span><span class="crayon-sy">[<&#47;span><span class="crayon-cn">0<&#47;span><span class="crayon-sy">]<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-65" class="crayon-line">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafad616359632-66" class="crayon-line crayon-striped-line"><span class="crayon-sy">}<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Теперь мы можем использовать их так:</p>
<div id="crayon-5637c4f5dafc6930486745" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafc6930486745-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafc6930486745-12">12<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafc6930486745-1" class="crayon-line"><span class="crayon-v">$logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">LogoutLink<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-2" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-3" class="crayon-line"><span class="crayon-st">if<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$is_logged_in<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-4" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">LogoutLinkStrongDecorator<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-5" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-6" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-7" class="crayon-line"><span class="crayon-st">if<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-v">$in_home_page<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">LogoutLinkH2Decorator<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-9" class="crayon-line"><span class="crayon-sy">}<&#47;span> <span class="crayon-st">else<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-v">$logout_link<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-e">LogoutLinkUnderlineDecorator<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-v">$logout_link<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-11" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafc6930486745-12" class="crayon-line crayon-striped-line"><span class="crayon-v">$logout_link<&#47;span><span class="crayon-o">-><&#47;span><span class="crayon-e">render<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Обратите внимание, как можно использовать несколько декораторов на одном объекте. Все они используют функцию <code>__call<&#47;code> для вызова оригинального метода. Если мы войдем в аккаунт и перейдем на заглавную страницу, результат будет такой:</p>
<div id="crayon-5637c4f5dafcd287382365" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafcd287382365-1">1<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafcd287382365-1" class="crayon-line">&nbsp;<span class="crayon-r "><strong><&#47;span><span class="crayon-r "><br />
<h2><&#47;span><span class="crayon-r "><a <&#47;span><span class="crayon-e ">href<&#47;span><span class="crayon-o">=<&#47;span><span class="crayon-s ">"logout.php"<&#47;span><span class="crayon-r ">><&#47;span><span class="crayon-i ">Logout<&#47;span><span class="crayon-r "><&#47;a><&#47;span><span class="crayon-r "><&#47;h2><&#47;span><span class="crayon-r "><&#47;strong><&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div></p>
<h2>Logout<&#47;h2></p>
<h3>Шаблон &laquo;Одиночка&raquo;<&#47;h3></p>
<blockquote><p><b>Одиночка<&#47;b> &mdash;&nbsp;порождающий шаблон, который позволяет убедиться, что в процессе выполнения программы создается только один экземпляр класса с глобальным доступом.<&#47;blockquote><br />
Его можно использовать как точку &laquo;координации&raquo; для других объектов, поскольку поля &laquo;Одиночки&raquo; будут одинаковы для всех, кто его вызывает.</p>
<h4>Как его использовать?<&#47;h4></p>
<p>Если вам необходимо передавать определенный экземпляр из класса в класс, вы можете передавать его каждый раз через конструктор или использовать &laquo;Одиночку&raquo;. Допустим, у вас есть класс <code>Session<&#47;code>, который содержит данные о текущей сессии. Поскольку сессия инициализируется только один раз, мы можем реализовать его так:</p>
<div id="crayon-5637c4f5dafd3532750683" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
<div class="crayon-plain-wrap"><&#47;div></p>
<div class="crayon-main">
<table class="crayon-table">
<tbody>
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content">
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-1">1<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-2">2<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-3">3<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-4">4<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-5">5<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-6">6<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-7">7<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-8">8<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-9">9<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-10">10<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-11">11<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-12">12<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-13">13<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-14">14<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-15">15<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-16">16<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-17">17<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-18">18<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-19">19<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-20">20<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-21">21<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-22">22<&#47;div></p>
<div class="crayon-num" data-line="crayon-5637c4f5dafd3532750683-23">23<&#47;div></p>
<div class="crayon-num crayon-striped-num" data-line="crayon-5637c4f5dafd3532750683-24">24<&#47;div><br />
<&#47;div><&#47;td></p>
<td class="crayon-code">
<div class="crayon-pre">
<div id="crayon-5637c4f5dafd3532750683-1" class="crayon-line"><span class="crayon-t">class<&#47;span> <span class="crayon-e">Session<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-2" class="crayon-line crayon-striped-line"><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-3" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-m">static<&#47;span> <span class="crayon-v">$instance<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-4" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-5" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">public<&#47;span> <span class="crayon-m">static<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">getInstance<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-6" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-7" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-st">if<&#47;span><span class="crayon-sy">(<&#47;span> <span class="crayon-e">is_null<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-r">self<&#47;span><span class="crayon-o">::<&#47;span><span class="crayon-v">$instance<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-8" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-r">self<&#47;span><span class="crayon-o">::<&#47;span><span class="crayon-v">$instance<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-r">new<&#47;span> <span class="crayon-r">self<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-9" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-10" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-k ">return<&#47;span> <span class="crayon-r">self<&#47;span><span class="crayon-o">::<&#47;span><span class="crayon-v">$instance<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-11" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-12" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-13" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__construct<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span> <span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-14" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-15" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-m">private<&#47;span> <span class="crayon-t">function<&#47;span> <span class="crayon-e">__clone<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span> <span class="crayon-sy">{<&#47;span> <span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-16" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-17" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-c">&#47;&#47;&nbsp;&nbsp;прочие методы сессии<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-18" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-19" class="crayon-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-20" class="crayon-line crayon-striped-line"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><span class="crayon-sy">.<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-21" class="crayon-line"><span class="crayon-sy">}<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-22" class="crayon-line crayon-striped-line"><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-23" class="crayon-line"><span class="crayon-c">&#47;&#47; get a session instance<&#47;span><&#47;div></p>
<div id="crayon-5637c4f5dafd3532750683-24" class="crayon-line crayon-striped-line"><span class="crayon-v">$session<&#47;span> <span class="crayon-o">=<&#47;span> <span class="crayon-e">Session::<&#47;span><span class="crayon-e">getInstance<&#47;span><span class="crayon-sy">(<&#47;span><span class="crayon-sy">)<&#47;span><span class="crayon-sy">;<&#47;span><&#47;div><br />
<&#47;div><&#47;td><br />
<&#47;tr><br />
<&#47;tbody><br />
<&#47;table><br />
<&#47;div><br />
<&#47;div><br />
Теперь мы можем получить доступ к сессии из различных участков кода, даже из других классов. Метод <code>getInstance<&#47;code> всегда будет возвращать одну и ту же сессию.</p>
<h3>Заключение<&#47;h3><br />
В этой статье мы рассмотрели только наиболее часто встречающиеся шаблоны из множества. Если вы хотите узнать больше о шаблонах проектирования, вы найдете достаточно информации на <a href="https:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F">Википедии<&#47;a>. Для более полной информации обратите внимание на знаменитую книгу <a href="http:&#47;&#47;www.ozon.ru&#47;context&#47;detail&#47;id&#47;2457392&#47;">&laquo;Приемы объектно-ориентированного проектирования&raquo;<&#47;a> &laquo;Банды четырех&raquo;.</p>
<p>И последнее: при использовании того или иного шаблона убедитесь, что вы решаете задачу правильным способом. Как уже упоминалось, при неправильном использовании шаблоны проектирования могут доставить больше проблем, чем решить. Но при правильном &mdash; их пользу нельзя переоценить.</p>
<p><sub>Перевод статьи <a href="http:&#47;&#47;code.tutsplus.com&#47;articles&#47;a-beginners-guide-to-design-patterns--net-12752">&laquo;A Beginner&rsquo;s Guide to Design Patterns?&raquo;<&#47;a><&#47;sub></p>
