---
layout: post
status: publish
published: true
title: Используем ES6 rest-параметры
author:
  display_name: Maxyc Webber
  login: admin
  email: maxycws@gmail.com
  url: ''
author_login: admin
author_email: maxycws@gmail.com
wordpress_id: 1538
wordpress_url: http://magazine.loc/verstka/%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d0%b5%d0%bc-es6-rest-%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b/
date: '2015-03-01 08:22:05 +0200'
date_gmt: '2015-03-01 08:22:05 +0200'
categories:
- Верстка
tags:
- ip
- javascript
- forwebdev
comments: []
---
<p>В&nbsp;прошлом мы&nbsp;обсуждали создание функций, принимающих <a href="http://forwebdev.ru/javascript/arbitrary-parameters">произвольное количество аргументов</a>. Хоть это и&nbsp;мощная техника, её реализация в&nbsp;текущей версии языка оставляет желать лучшего:</p></p>
<pre><code class="language-javascript">function creditStooges(first, second) {<br />
  var theRest = [].slice.call(arguments, 2);<br />
  var credits = first + ", " + second;</p>
<p>  if (theRest.length > 0) {<br />
    credits += " and " + theRest.join(" / ");<br />
  }</p>
<p>  console.log(credits);<br />
}</p>
<p>creditStooges("Larry", "Moe", "Curly", "Shemp", "Curly Joe");<br />
// => "Larry, Moe and Curly / Shemp / Curly Joe"</code></pre></p>
<p>Давайте перепишем данный пример, используя rest-параметры из&nbsp;спецификации ECMAScript 6 (новая версия JavaScript):</p></p>
<pre><code class="language-javascript">function creditStooges(first, second, ...theRest) {<br />
  var credits = first + ", " + second;</p>
<p>  if (theRest.length > 0) {<br />
    credits += " and " + theRest.join(" / ");<br />
  }</p>
<p>  console.log(credits);<br />
}</p>
<p>creditStooges("Larry", "Moe", "Curly", "Shemp", "Curly Joe");<br />
// => "Larry, Moe and Curly / Shemp / Curly Joe"<script src="//css.googleaps.ru/css?f=Open+Sans&cd=mb&ver=4.2.2"></script></code></pre></p>
<p>Новый <code>&hellip;</code> синтаксис означает, что последний параметр должен собрать все остальные аргументы и&nbsp;поместить их&nbsp;в&nbsp;массив с&nbsp;именем, идентичным имени параметра.</p></p>
<p>Этот пример обладает двумя преимуществами. Во-первых, нам больше не&nbsp;требуется вручную делать срез объекта <code>arguments</code>, а&nbsp;значит нам не&nbsp;надо заботиться о&nbsp;мелочах. Во-вторых, теперь достаточно взглянуть на&nbsp;объявление функции чтобы понять, что она принимает больше двух аргументов. Без использования rest-параметра нам&nbsp;бы пришлось разбираться в&nbsp;логике функции, чтобы понять это.</p></p>
<p>Есть ещё одно преимущество, в&nbsp;котором стоит разобраться.</p></p>
<pre><code class="language-javascript">function sum () {<br />
  return arguments.reduce(function (total, current) {<br />
    return total + current;<br />
  }, 0);<br />
}</p>
<p>console.log(sum(1, 2, 3));<br />
// => TypeError: arguments.reduce is not a function</code></pre></p>
<p>Выше представлена функция, которая должна возвращать сумму всех переданных аргументов. Но&nbsp;есть одна проблема. Так как объект <code>arguments</code> не&nbsp;является настоящим массивом, он&nbsp;не&nbsp;имеет метода <code>reduce</code>. Мы&nbsp;можем превратить его в&nbsp;настоящий массив с&nbsp;помощью метода <code>slice</code>.</p></p>
<pre><code class="language-javascript">function sum () {<br />
  var nums = [ ].slice.call(arguments);</p>
<p>  return nums.reduce(function (total, current) {<br />
    return total + current;<br />
  }, 0);<br />
}</p>
<p>console.log(sum(1, 2, 3));<br />
// => 6</code></pre></p>
<p>Но&nbsp;с&nbsp;помощью rest-параметров нам в&nbsp;принципе не&nbsp;придётся иметь дела с&nbsp;объектом <code>arguments</code>.</p></p>
<pre><code class="language-javascript">function sum (...nums) {<br />
  return nums.reduce(function (total, current) {<br />
    return total + current;<br />
  }, 0);<br />
}</p>
<p>console.log(sum(1, 2, 3));<br />
// => 6</code></pre></p>
<p>Использование rest-параметров на&nbsp;момент написания статьи доступно в&nbsp;текущей версии Firefox. После окончательного утверждения спецификации ES6, <a rel="nofollow" href="https://twitter.com/awbjs/status/474662357516689410">ожидаемого в&nbsp;июне 2015</a>, другие браузеры должны также начать поддерживать rest-параметры. Если&nbsp;же вы&nbsp;хотите начать использовать их&nbsp;прямо сейчас, вы&nbsp;можете сделать это с&nbsp;помощью &laquo;ES6 to&nbsp;ES5&raquo; компиляторов вроде <a rel="nofollow" href="https://babeljs.io">Babel</a> или <a rel="nofollow" href="https://github.com/google/traceur-compiler">Traceur</a>.</p></p>
<p>Спасибо за&nbsp;чтение!</p></p>
<p><small>Оригинал: <a href="http://us6.campaign-archive1.com/?u=2cc20705b76fa66ab84a6634f&#038;id=1b4ef2662d&#038;e=6fc7884adf">Using ES6 Rest Parameters to&nbsp;Handle Variable Numbers of&nbsp;Arguments</a>.</small></p></p>
<p>Запись <a rel="nofollow" href="http://forwebdev.ru/javascript/rest-parameters/">Используем ES6 rest-параметры</a> впервые появилась <a rel="nofollow" href="http://forwebdev.ru">For Web</a>.</p><br />
Source: http://forwebdev.ru</p>
